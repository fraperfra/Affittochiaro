{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "PreSignUpLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-preSignUp"
      }
    },
    "PostConfirmationLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-postConfirmation"
      }
    },
    "PreTokenGenerationLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-preTokenGeneration"
      }
    },
    "GetCurrentUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getCurrentUser"
      }
    },
    "ListTenantsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-listTenants"
      }
    },
    "GetTenantLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getTenant"
      }
    },
    "GetTenantProfileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getTenantProfile"
      }
    },
    "UpdateTenantProfileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-updateTenantProfile"
      }
    },
    "UnlockTenantLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-unlockTenant"
      }
    },
    "UploadDocumentLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-uploadDocument"
      }
    },
    "GetAgencyProfileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getAgencyProfile"
      }
    },
    "UpdateAgencyProfileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-updateAgencyProfile"
      }
    },
    "GetCreditsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getCredits"
      }
    },
    "GetUnlockedTenantsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getUnlockedTenants"
      }
    },
    "ListListingsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-listListings"
      }
    },
    "GetListingLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getListing"
      }
    },
    "CreateListingLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-createListing"
      }
    },
    "UpdateListingLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-updateListing"
      }
    },
    "DeleteListingLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-deleteListing"
      }
    },
    "ApplyToListingLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-applyToListing"
      }
    },
    "ListApplicationsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-listApplications"
      }
    },
    "UpdateApplicationLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-updateApplication"
      }
    },
    "GetMatchingListingsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getMatchingListings"
      }
    },
    "GetMatchingTenantsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getMatchingTenants"
      }
    },
    "ListNotificationsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-listNotifications"
      }
    },
    "MarkNotificationsReadLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-markNotificationsRead"
      }
    },
    "GetNotificationPreferencesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-getNotificationPreferences"
      }
    },
    "UpdateNotificationPreferencesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-updateNotificationPreferences"
      }
    },
    "CreateCheckoutLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-createCheckout"
      }
    },
    "StripeWebhookLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-stripeWebhook"
      }
    },
    "CreatePortalSessionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-createPortalSession"
      }
    },
    "WsConnectLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-wsConnect"
      }
    },
    "WsDisconnectLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-wsDisconnect"
      }
    },
    "ScraperSchedulerLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-scraperScheduler"
      }
    },
    "ScraperProcessorLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-scraperProcessor"
      }
    },
    "MatchingCalculatorLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-matchingCalculator"
      }
    },
    "NotificationSenderLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-notificationSender"
      }
    },
    "NotificationDispatcherLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-notificationDispatcher"
      }
    },
    "NotificationRetryProcessorLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/affittochiaro-api-dev-notificationRetryProcessor"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "affittochiaro-api",
                  "dev",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/affittochiaro-api-dev*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/affittochiaro-api-dev*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "cognito-idp:*"
                  ],
                  "Resource": {
                    "Fn::GetAtt": [
                      "CognitoUserPool",
                      "Arn"
                    ]
                  }
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "s3:GetObject",
                    "s3:PutObject",
                    "s3:DeleteObject"
                  ],
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        {
                          "Fn::GetAtt": [
                            "UploadsBucket",
                            "Arn"
                          ]
                        },
                        "/*"
                      ]
                    ]
                  }
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "ses:SendEmail",
                    "ses:SendRawEmail"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:ReceiveMessage",
                    "sqs:DeleteMessage"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "ScraperQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "MatchingQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "NotificationRetryQueue",
                        "Arn"
                      ]
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:Query"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "WebSocketConnectionsTable",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Fn::GetAtt": [
                              "WebSocketConnectionsTable",
                              "Arn"
                            ]
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "execute-api:ManageConnections"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "execute-api:ManageConnections"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:execute-api:*:*:*/@connections/*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "ScraperQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "MatchingQueue",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::GetAtt": [
                        "NotificationRetryQueue",
                        "Arn"
                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "affittochiaro-api",
              "dev",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "PreSignUpLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/auth/cognito-triggers/preSignUp.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-preSignUp",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "PreSignUpLogGroup"
      ]
    },
    "PostConfirmationLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/auth/cognito-triggers/postConfirmation.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-postConfirmation",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "PostConfirmationLogGroup"
      ]
    },
    "PreTokenGenerationLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/auth/cognito-triggers/preTokenGeneration.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-preTokenGeneration",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "PreTokenGenerationLogGroup"
      ]
    },
    "GetCurrentUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/users/getCurrentUser.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getCurrentUser",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCurrentUserLogGroup"
      ]
    },
    "ListTenantsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/tenants/list.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-listTenants",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListTenantsLogGroup"
      ]
    },
    "GetTenantLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/tenants/get.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getTenant",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetTenantLogGroup"
      ]
    },
    "GetTenantProfileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/tenants/getProfile.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getTenantProfile",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetTenantProfileLogGroup"
      ]
    },
    "UpdateTenantProfileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/tenants/updateProfile.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-updateTenantProfile",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateTenantProfileLogGroup"
      ]
    },
    "UnlockTenantLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/tenants/unlock.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-unlockTenant",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UnlockTenantLogGroup"
      ]
    },
    "UploadDocumentLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/tenants/uploadDocument.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-uploadDocument",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UploadDocumentLogGroup"
      ]
    },
    "GetAgencyProfileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/agencies/getProfile.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getAgencyProfile",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetAgencyProfileLogGroup"
      ]
    },
    "UpdateAgencyProfileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/agencies/updateProfile.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-updateAgencyProfile",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateAgencyProfileLogGroup"
      ]
    },
    "GetCreditsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/agencies/getCredits.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getCredits",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCreditsLogGroup"
      ]
    },
    "GetUnlockedTenantsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/agencies/getUnlockedTenants.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getUnlockedTenants",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetUnlockedTenantsLogGroup"
      ]
    },
    "ListListingsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/listings/list.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-listListings",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListListingsLogGroup"
      ]
    },
    "GetListingLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/listings/get.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getListing",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetListingLogGroup"
      ]
    },
    "CreateListingLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/listings/create.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-createListing",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateListingLogGroup"
      ]
    },
    "UpdateListingLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/listings/update.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-updateListing",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateListingLogGroup"
      ]
    },
    "DeleteListingLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/listings/delete.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-deleteListing",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DeleteListingLogGroup"
      ]
    },
    "ApplyToListingLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/applications/apply.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-applyToListing",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ApplyToListingLogGroup"
      ]
    },
    "ListApplicationsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/applications/list.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-listApplications",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListApplicationsLogGroup"
      ]
    },
    "UpdateApplicationLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/applications/update.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-updateApplication",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateApplicationLogGroup"
      ]
    },
    "GetMatchingListingsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/matching/getListingsForTenant.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getMatchingListings",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMatchingListingsLogGroup"
      ]
    },
    "GetMatchingTenantsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/matching/getTenantsForListing.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getMatchingTenants",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMatchingTenantsLogGroup"
      ]
    },
    "ListNotificationsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/notifications/list.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-listNotifications",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListNotificationsLogGroup"
      ]
    },
    "MarkNotificationsReadLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/notifications/markRead.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-markNotificationsRead",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "MarkNotificationsReadLogGroup"
      ]
    },
    "GetNotificationPreferencesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/notifications/getPreferences.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-getNotificationPreferences",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetNotificationPreferencesLogGroup"
      ]
    },
    "UpdateNotificationPreferencesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/notifications/updatePreferences.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-updateNotificationPreferences",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateNotificationPreferencesLogGroup"
      ]
    },
    "CreateCheckoutLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/payments/createCheckout.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-createCheckout",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateCheckoutLogGroup"
      ]
    },
    "StripeWebhookLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/payments/webhook.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-stripeWebhook",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "StripeWebhookLogGroup"
      ]
    },
    "CreatePortalSessionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/payments/createPortal.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-createPortalSession",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreatePortalSessionLogGroup"
      ]
    },
    "WsConnectLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/websocket/connect.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-wsConnect",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WsConnectLogGroup"
      ]
    },
    "WsDisconnectLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/api/websocket/disconnect.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-wsDisconnect",
        "MemorySize": 256,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WsDisconnectLogGroup"
      ]
    },
    "ScraperSchedulerLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/workers/scraper/scheduler.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-scraperScheduler",
        "MemorySize": 256,
        "Timeout": 900,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ScraperSchedulerLogGroup"
      ]
    },
    "ScraperProcessorLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/workers/scraper/processor.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-scraperProcessor",
        "MemorySize": 256,
        "Timeout": 300,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ScraperProcessorLogGroup"
      ]
    },
    "MatchingCalculatorLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/workers/matching/calculator.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-matchingCalculator",
        "MemorySize": 256,
        "Timeout": 300,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "MatchingCalculatorLogGroup"
      ]
    },
    "NotificationSenderLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/workers/notifications/sender.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-notificationSender",
        "MemorySize": 256,
        "Timeout": 60,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "NotificationSenderLogGroup"
      ]
    },
    "NotificationDispatcherLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/notifications/dispatcher.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-notificationDispatcher",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "NotificationDispatcherLogGroup"
      ]
    },
    "NotificationRetryProcessorLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/affittochiaro-api/dev/1769974729739-2026-02-01T19:38:49.739Z/affittochiaro-api.zip"
        },
        "Handler": "lambdas/notifications/retry-processor.handler",
        "Runtime": "nodejs18.x",
        "FunctionName": "affittochiaro-api-dev-notificationRetryProcessor",
        "MemorySize": 256,
        "Timeout": 60,
        "Environment": {
          "Variables": {
            "STAGE": "dev",
            "DB_HOST": "affittochiaro-dev.cjwkuo8ww30k.eu-north-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "affittochiaro",
            "DB_USER": "affittochiaro_admin",
            "DB_PASSWORD": "AffittoChiaro2024Dev",
            "COGNITO_USER_POOL_ID": {
              "Ref": "CognitoUserPool"
            },
            "COGNITO_CLIENT_ID": {
              "Ref": "CognitoUserPoolClient"
            },
            "S3_BUCKET": {
              "Ref": "UploadsBucket"
            },
            "STRIPE_SECRET_KEY": "sk_test_placeholder",
            "STRIPE_WEBHOOK_SECRET": "whsec_placeholder",
            "SES_FROM_EMAIL": "noreply@affittochiaro.it",
            "WHATSAPP_PHONE_NUMBER_ID": "placeholder",
            "WHATSAPP_ACCESS_TOKEN": "placeholder",
            "WEBSOCKET_CONNECTIONS_TABLE": {
              "Ref": "WebSocketConnectionsTable"
            },
            "SCRAPER_QUEUE_URL": {
              "Ref": "ScraperQueue"
            },
            "MATCHING_QUEUE_URL": {
              "Ref": "MatchingQueue"
            },
            "NOTIFICATION_RETRY_QUEUE_URL": {
              "Ref": "NotificationRetryQueue"
            },
            "TWILIO_ACCOUNT_SID": "placeholder",
            "TWILIO_AUTH_TOKEN": "placeholder",
            "TWILIO_WHATSAPP_NUMBER": "+14155238886",
            "SES_SENDER_EMAIL": "noreply@affittochiaro.it",
            "SES_SENDER_NAME": "Affittochiaro"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "NotificationRetryProcessorLogGroup"
      ]
    },
    "PreSignUpLambdaVersionMtB2a4hWNezRBnjnAB7k8hTltDJlkfVUXm1bLYVYw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "PreSignUpLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "PostConfirmationLambdaVersionIc5oc1MpZj2mZigKmJ4D1unS0tlTzH19bDexyDpZUg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "PostConfirmationLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "PreTokenGenerationLambdaVersionUbdb4xngGHskHmzqxCf5sIeVjSgZAbifNl3noKPzFRo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "PreTokenGenerationLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetCurrentUserLambdaVersionORHCr2NyBljsue7S7J3A6iZIAmE8Abz1j7tvvJWVo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCurrentUserLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ListTenantsLambdaVersionBlGNA3LtpG0fjQMJ7Vwdwjt4QlD9orghTUUNfknfKoo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListTenantsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetTenantLambdaVersionFcBhqUPWmUQ5Yx2ilLoGfHls8uYfbBcGklEizydrY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetTenantLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetTenantProfileLambdaVersionzvegZyI0c1nqgBxmKEAyCWqbvZ88htDdsbVWBTIc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetTenantProfileLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "UpdateTenantProfileLambdaVersionJXXSg9Omw4Ddqv04mJpbY5PpwDYY36p3h27uRALc0PA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateTenantProfileLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "UnlockTenantLambdaVersionBz4qae5Yas3Abd8VT1UwTstFKcbnEotE9LHJAdAnLw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UnlockTenantLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "UploadDocumentLambdaVersionwzYPXc4GlM36tawlcFmXYyXRfDoCtXSJEk5hDVvyw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UploadDocumentLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetAgencyProfileLambdaVersionwEDMEN0HgZDucCXYCc4ry1RG92ymLZKCIBllPCfdk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetAgencyProfileLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "UpdateAgencyProfileLambdaVersionYY45yNDmBggJc5GQd2spn27kItJ4wFqHxSwmPXWbCF0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateAgencyProfileLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetCreditsLambdaVersionc10CNmD6EwQT1D2oKxcel6FDtxPRbZV5NzPQ88gIF7Q": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCreditsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetUnlockedTenantsLambdaVersionrxfFykmVEJny8ZdxTnZEviSLGv0zy6BNGHK1UfZclOA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetUnlockedTenantsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ListListingsLambdaVersionhZk4f7TtpeNGC1215CLzF6OVy9URuU5VKQvYUqS1A": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListListingsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetListingLambdaVersionZDt6h65m0dadNp7g4hSFy4GUEUlvM1IDdXiEt6lQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetListingLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "CreateListingLambdaVersioncifGzjQIWtKiahVlmUXzlB9LedIDApIKBaWWaZ25Ic": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateListingLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "UpdateListingLambdaVersionEF22VewvHiyBd89ftG0QcOSaaZEBe2jLLv5sLDyVNE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateListingLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "DeleteListingLambdaVersionL6SISwzvlfdRQxOZVPQ52inQHqg0Ky2EZl1CMa0OGoE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DeleteListingLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ApplyToListingLambdaVersionIynwHPfGF7KJiBRVCTwz5BwhKHuYGjVPllyRNvtHLSI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ApplyToListingLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ListApplicationsLambdaVersionJOHkwgwsFiXxZRf7RrXsWfq9MgvpeZgoqXDec6UKXk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListApplicationsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "UpdateApplicationLambdaVersionQl1W6o8dhJl4UFyaSiTfKFxlG0sD4kxKOAApIXQe3k": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateApplicationLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetMatchingListingsLambdaVersionkTMspLSD5NPfa5zqrFVrV62lAUQZDVRcFpeQBDojTg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMatchingListingsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetMatchingTenantsLambdaVersionxRtys7lD88CltAWQLOLU0MYpIRCcfxPoiCdm5Ww8Gq8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMatchingTenantsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ListNotificationsLambdaVersionL9jxXH7j2jPAu33BZu01PQuyuQ2wf7UpwwIk0ZvL4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListNotificationsLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "MarkNotificationsReadLambdaVersionu00nu629WYobmNZ8ZmgNJXYmxhT8c8luGnM7jA8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "MarkNotificationsReadLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "GetNotificationPreferencesLambdaVersionOo4QOwb0HBv7e2DgU5kPMmXwedD9pI4jzZqiiPI1k": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetNotificationPreferencesLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "UpdateNotificationPreferencesLambdaVersiontuqcYj0ht7QkhwiPqcQRf1V80SmmFqeVJu6U7c": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateNotificationPreferencesLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "CreateCheckoutLambdaVersionQtQvWWD9Xwa9cCKDhS310Luwfx5fWavw2NhlmreuY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateCheckoutLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "StripeWebhookLambdaVersion78QiAye0e8tpwq77lLv0dVwGTokla6SVGutVR2O70b4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "StripeWebhookLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "CreatePortalSessionLambdaVersionwU6qmy6h28LddCoxqMgM5M0944noGr9cE8inI4iXsQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreatePortalSessionLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "WsConnectLambdaVersionTLsJJWzIuRI4deeNDUJZmVsiYjpBvhMgVRDywxIYIg0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WsConnectLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "WsDisconnectLambdaVersionPQi9bCw5hwZD9pdmurYpC7csbLC7BEYhhLoI6lr1dQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WsDisconnectLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ScraperSchedulerLambdaVersionU9AqN9ZhycnJ1VUt9Ao283VFC6QPooSRSn4SUguDLSk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ScraperSchedulerLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ScraperProcessorLambdaVersionqN9stOfqtaPGtZ6JisHdsPlzX9XtTDT31AxvHZVl0Q": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ScraperProcessorLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "MatchingCalculatorLambdaVersionH4pcaLoMO672pJwtGnRsNKu3y0pv41OJ9ydAsT7o": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "MatchingCalculatorLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "NotificationSenderLambdaVersioniOwywxWxAWlPt4gxpHNLDKeW3Rad7BpAKoIwBiUkKN4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "NotificationSenderLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "NotificationDispatcherLambdaVersionxFsimg2Xu3FGvve0jDQZflTnhN5KyqLE6MlTXtPDhA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "NotificationDispatcherLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "NotificationRetryProcessorLambdaVersionHD9lO4aCq5Z5ODhLbtvHJnTMCq673ZcJJIHsRz6WRg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "NotificationRetryProcessorLambdaFunction"
        },
        "CodeSha256": "+qy/SiTD5HDuGfLq0pPPzL5usI01CXbWcrq8VpMsTGo="
      }
    },
    "ScraperSchedulerEventsRuleSchedule1": {
      "Type": "AWS::Events::Rule",
      "Properties": {
        "ScheduleExpression": "cron(0 3 * * ? *)",
        "State": "ENABLED",
        "Targets": [
          {
            "Arn": {
              "Fn::GetAtt": [
                "ScraperSchedulerLambdaFunction",
                "Arn"
              ]
            },
            "Id": "scraperSchedulerSchedule"
          }
        ]
      }
    },
    "ScraperSchedulerLambdaPermissionEventsRuleSchedule1": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ScraperSchedulerLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "events.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "ScraperSchedulerEventsRuleSchedule1",
            "Arn"
          ]
        }
      }
    },
    "ApiGatewayRestApi": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Name": "dev-affittochiaro-api",
        "EndpointConfiguration": {
          "Types": [
            "EDGE"
          ]
        },
        "Policy": ""
      }
    },
    "ApiGatewayResourceUsers": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "users",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceUsersMe": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceUsers"
        },
        "PathPart": "me",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceTenants": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "tenants",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceTenantsTenantidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceTenants"
        },
        "PathPart": "{tenantId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceTenantsTenantidVarUnlock": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceTenantsTenantidVar"
        },
        "PathPart": "unlock",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceTenantsMe": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceTenants"
        },
        "PathPart": "me",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceTenantsMeDocuments": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceTenantsMe"
        },
        "PathPart": "documents",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceAgencies": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "agencies",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceAgenciesMe": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceAgencies"
        },
        "PathPart": "me",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceAgenciesMeCredits": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceAgenciesMe"
        },
        "PathPart": "credits",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceAgenciesMeUnlockedDashtenants": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceAgenciesMe"
        },
        "PathPart": "unlocked-tenants",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceListings": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "listings",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceListingsListingidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceListings"
        },
        "PathPart": "{listingId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceListingsListingidVarApply": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceListingsListingidVar"
        },
        "PathPart": "apply",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApplications": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "applications",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceApplicationsApplicationidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceApplications"
        },
        "PathPart": "{applicationId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceMatching": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "matching",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceMatchingTenant": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceMatching"
        },
        "PathPart": "tenant",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceMatchingTenantTenantidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceMatchingTenant"
        },
        "PathPart": "{tenantId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceMatchingTenantTenantidVarListings": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceMatchingTenantTenantidVar"
        },
        "PathPart": "listings",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceMatchingListing": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceMatching"
        },
        "PathPart": "listing",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceMatchingListingListingidVar": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceMatchingListing"
        },
        "PathPart": "{listingId}",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceMatchingListingListingidVarTenants": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceMatchingListingListingidVar"
        },
        "PathPart": "tenants",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceNotifications": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "notifications",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceNotificationsMarkDashread": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceNotifications"
        },
        "PathPart": "mark-read",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceNotificationsPreferences": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceNotifications"
        },
        "PathPart": "preferences",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourceNotificationsSend": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourceNotifications"
        },
        "PathPart": "send",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourcePayments": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "ApiGatewayRestApi",
            "RootResourceId"
          ]
        },
        "PathPart": "payments",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourcePaymentsCreateDashcheckout": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourcePayments"
        },
        "PathPart": "create-checkout",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourcePaymentsWebhook": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourcePayments"
        },
        "PathPart": "webhook",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayResourcePaymentsPortal": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "ApiGatewayResourcePayments"
        },
        "PathPart": "portal",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodUsersMeOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceUsersMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodTenantsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenants"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodTenantsTenantidVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsTenantidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodTenantsMeOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,PUT,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodTenantsTenantidVarUnlockOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsTenantidVarUnlock"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodTenantsMeDocumentsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsMeDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodAgenciesMeOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,PUT,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceAgenciesMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodAgenciesMeCreditsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceAgenciesMeCredits"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodAgenciesMeUnlockedDashtenantsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceAgenciesMeUnlockedDashtenants"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodListingsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceListings"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodListingsListingidVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,DELETE,PUT,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceListingsListingidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodListingsListingidVarApplyOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceListingsListingidVarApply"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApplicationsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApplications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodApplicationsApplicationidVarOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,PATCH'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceApplicationsApplicationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodMatchingTenantTenantidVarListingsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceMatchingTenantTenantidVarListings"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodMatchingListingListingidVarTenantsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceMatchingListingListingidVarTenants"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodNotificationsOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodNotificationsMarkDashreadOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotificationsMarkDashread"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodNotificationsPreferencesOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,PUT,GET'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotificationsPreferences"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodPaymentsCreateDashcheckoutOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourcePaymentsCreateDashcheckout"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodPaymentsWebhookOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourcePaymentsWebhook"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodPaymentsPortalOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourcePaymentsPortal"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodNotificationsSendOptions": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "MethodResponses": [
          {
            "StatusCode": "200",
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "ResponseModels": {}
          }
        ],
        "RequestParameters": {},
        "Integration": {
          "Type": "MOCK",
          "RequestTemplates": {
            "application/json": "{statusCode:200}"
          },
          "ContentHandling": "CONVERT_TO_TEXT",
          "IntegrationResponses": [
            {
              "StatusCode": "200",
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
              },
              "ResponseTemplates": {
                "application/json": ""
              }
            }
          ]
        },
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotificationsSend"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        }
      }
    },
    "ApiGatewayMethodUsersMeGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceUsersMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetCurrentUserLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetCurrentUserLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodTenantsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenants"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListTenantsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ListTenantsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodTenantsTenantidVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsTenantidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetTenantLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetTenantLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodTenantsMeGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetTenantProfileLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetTenantProfileLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodTenantsMePut": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "PUT",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UpdateTenantProfileLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UpdateTenantProfileLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodTenantsTenantidVarUnlockPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsTenantidVarUnlock"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UnlockTenantLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UnlockTenantLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodTenantsMeDocumentsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceTenantsMeDocuments"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UploadDocumentLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UploadDocumentLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodAgenciesMeGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceAgenciesMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetAgencyProfileLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetAgencyProfileLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodAgenciesMePut": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "PUT",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceAgenciesMe"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UpdateAgencyProfileLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UpdateAgencyProfileLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodAgenciesMeCreditsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceAgenciesMeCredits"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetCreditsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetCreditsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodAgenciesMeUnlockedDashtenantsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceAgenciesMeUnlockedDashtenants"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetUnlockedTenantsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetUnlockedTenantsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodListingsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceListings"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListListingsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ListListingsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodListingsListingidVarGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceListingsListingidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetListingLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetListingLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodListingsPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceListings"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "CreateListingLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "CreateListingLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodListingsListingidVarPut": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "PUT",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceListingsListingidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UpdateListingLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UpdateListingLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodListingsListingidVarDelete": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "DELETE",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceListingsListingidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "DeleteListingLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "DeleteListingLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodListingsListingidVarApplyPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceListingsListingidVarApply"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApplyToListingLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ApplyToListingLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApplicationsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApplications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListApplicationsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ListApplicationsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodApplicationsApplicationidVarPatch": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "PATCH",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceApplicationsApplicationidVar"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UpdateApplicationLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UpdateApplicationLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodMatchingTenantTenantidVarListingsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceMatchingTenantTenantidVarListings"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetMatchingListingsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetMatchingListingsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodMatchingListingListingidVarTenantsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceMatchingListingListingidVarTenants"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetMatchingTenantsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetMatchingTenantsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodNotificationsGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotifications"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ListNotificationsLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "ListNotificationsLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodNotificationsMarkDashreadPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotificationsMarkDashread"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "MarkNotificationsReadLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "MarkNotificationsReadLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodNotificationsPreferencesGet": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "GET",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotificationsPreferences"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "GetNotificationPreferencesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "GetNotificationPreferencesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodNotificationsPreferencesPut": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "PUT",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotificationsPreferences"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "UpdateNotificationPreferencesLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "UpdateNotificationPreferencesLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodPaymentsCreateDashcheckoutPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourcePaymentsCreateDashcheckout"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "CreateCheckoutLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "CreateCheckoutLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodPaymentsWebhookPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourcePaymentsWebhook"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "StripeWebhookLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "StripeWebhookLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodPaymentsPortalPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourcePaymentsPortal"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "CreatePortalSessionLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "CreatePortalSessionLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayMethodNotificationsSendPost": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "RequestParameters": {},
        "ResourceId": {
          "Ref": "ApiGatewayResourceNotificationsSend"
        },
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ApiKeyRequired": false,
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "ApiGatewayAuthorizer"
        },
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region"
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "NotificationDispatcherLambdaFunction",
                    "Arn"
                  ]
                },
                "/invocations"
              ]
            ]
          }
        },
        "MethodResponses": []
      },
      "DependsOn": [
        "NotificationDispatcherLambdaPermissionApiGateway"
      ]
    },
    "ApiGatewayDeployment1769974716514": {
      "Type": "AWS::ApiGateway::Deployment",
      "Properties": {
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "StageName": "dev"
      },
      "DependsOn": [
        "ApiGatewayMethodUsersMeOptions",
        "ApiGatewayMethodTenantsOptions",
        "ApiGatewayMethodTenantsTenantidVarOptions",
        "ApiGatewayMethodTenantsMeOptions",
        "ApiGatewayMethodTenantsTenantidVarUnlockOptions",
        "ApiGatewayMethodTenantsMeDocumentsOptions",
        "ApiGatewayMethodAgenciesMeOptions",
        "ApiGatewayMethodAgenciesMeCreditsOptions",
        "ApiGatewayMethodAgenciesMeUnlockedDashtenantsOptions",
        "ApiGatewayMethodListingsOptions",
        "ApiGatewayMethodListingsListingidVarOptions",
        "ApiGatewayMethodListingsListingidVarApplyOptions",
        "ApiGatewayMethodApplicationsOptions",
        "ApiGatewayMethodApplicationsApplicationidVarOptions",
        "ApiGatewayMethodMatchingTenantTenantidVarListingsOptions",
        "ApiGatewayMethodMatchingListingListingidVarTenantsOptions",
        "ApiGatewayMethodNotificationsOptions",
        "ApiGatewayMethodNotificationsMarkDashreadOptions",
        "ApiGatewayMethodNotificationsPreferencesOptions",
        "ApiGatewayMethodPaymentsCreateDashcheckoutOptions",
        "ApiGatewayMethodPaymentsWebhookOptions",
        "ApiGatewayMethodPaymentsPortalOptions",
        "ApiGatewayMethodNotificationsSendOptions",
        "ApiGatewayMethodUsersMeGet",
        "ApiGatewayMethodTenantsGet",
        "ApiGatewayMethodTenantsTenantidVarGet",
        "ApiGatewayMethodTenantsMeGet",
        "ApiGatewayMethodTenantsMePut",
        "ApiGatewayMethodTenantsTenantidVarUnlockPost",
        "ApiGatewayMethodTenantsMeDocumentsPost",
        "ApiGatewayMethodAgenciesMeGet",
        "ApiGatewayMethodAgenciesMePut",
        "ApiGatewayMethodAgenciesMeCreditsGet",
        "ApiGatewayMethodAgenciesMeUnlockedDashtenantsGet",
        "ApiGatewayMethodListingsGet",
        "ApiGatewayMethodListingsListingidVarGet",
        "ApiGatewayMethodListingsPost",
        "ApiGatewayMethodListingsListingidVarPut",
        "ApiGatewayMethodListingsListingidVarDelete",
        "ApiGatewayMethodListingsListingidVarApplyPost",
        "ApiGatewayMethodApplicationsGet",
        "ApiGatewayMethodApplicationsApplicationidVarPatch",
        "ApiGatewayMethodMatchingTenantTenantidVarListingsGet",
        "ApiGatewayMethodMatchingListingListingidVarTenantsGet",
        "ApiGatewayMethodNotificationsGet",
        "ApiGatewayMethodNotificationsMarkDashreadPost",
        "ApiGatewayMethodNotificationsPreferencesGet",
        "ApiGatewayMethodNotificationsPreferencesPut",
        "ApiGatewayMethodPaymentsCreateDashcheckoutPost",
        "ApiGatewayMethodPaymentsWebhookPost",
        "ApiGatewayMethodPaymentsPortalPost",
        "ApiGatewayMethodNotificationsSendPost"
      ]
    },
    "GetCurrentUserLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCurrentUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ListTenantsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListTenantsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetTenantLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetTenantLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetTenantProfileLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetTenantProfileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UpdateTenantProfileLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateTenantProfileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UnlockTenantLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UnlockTenantLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UploadDocumentLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UploadDocumentLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetAgencyProfileLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetAgencyProfileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UpdateAgencyProfileLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateAgencyProfileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetCreditsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCreditsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetUnlockedTenantsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetUnlockedTenantsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ListListingsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListListingsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetListingLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetListingLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "CreateListingLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateListingLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UpdateListingLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateListingLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "DeleteListingLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DeleteListingLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ApplyToListingLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ApplyToListingLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ListApplicationsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListApplicationsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UpdateApplicationLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateApplicationLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetMatchingListingsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMatchingListingsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetMatchingTenantsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMatchingTenantsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "ListNotificationsLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListNotificationsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "MarkNotificationsReadLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "MarkNotificationsReadLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "GetNotificationPreferencesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetNotificationPreferencesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "UpdateNotificationPreferencesLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateNotificationPreferencesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "CreateCheckoutLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateCheckoutLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "StripeWebhookLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "StripeWebhookLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "CreatePortalSessionLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreatePortalSessionLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "NotificationDispatcherLambdaPermissionApiGateway": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "NotificationDispatcherLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "ApiGatewayRestApi"
              },
              "/*/*"
            ]
          ]
        }
      }
    },
    "WebsocketsApi": {
      "Type": "AWS::ApiGatewayV2::Api",
      "Properties": {
        "Name": "dev-affittochiaro-api-websockets",
        "RouteSelectionExpression": "$request.body.action",
        "Description": "Serverless Websockets",
        "ProtocolType": "WEBSOCKET"
      }
    },
    "WsConnectWebsocketsIntegration": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "WebsocketsApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":apigateway:",
              {
                "Ref": "AWS::Region"
              },
              ":lambda:path/2015-03-31/functions/",
              {
                "Fn::GetAtt": [
                  "WsConnectLambdaFunction",
                  "Arn"
                ]
              },
              "/invocations"
            ]
          ]
        }
      }
    },
    "WsDisconnectWebsocketsIntegration": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "WebsocketsApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":apigateway:",
              {
                "Ref": "AWS::Region"
              },
              ":lambda:path/2015-03-31/functions/",
              {
                "Fn::GetAtt": [
                  "WsDisconnectLambdaFunction",
                  "Arn"
                ]
              },
              "/invocations"
            ]
          ]
        }
      }
    },
    "WsConnectLambdaPermissionWebsockets": {
      "Type": "AWS::Lambda::Permission",
      "DependsOn": [
        "WebsocketsApi",
        "WsConnectLambdaFunction"
      ],
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WsConnectLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com"
      }
    },
    "WsDisconnectLambdaPermissionWebsockets": {
      "Type": "AWS::Lambda::Permission",
      "DependsOn": [
        "WebsocketsApi",
        "WsDisconnectLambdaFunction"
      ],
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WsDisconnectLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com"
      }
    },
    "SconnectWebsocketsRoute": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "WebsocketsApi"
        },
        "RouteKey": "$connect",
        "AuthorizationType": "NONE",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "WsConnectWebsocketsIntegration"
              }
            ]
          ]
        }
      }
    },
    "SdisconnectWebsocketsRoute": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "WebsocketsApi"
        },
        "RouteKey": "$disconnect",
        "AuthorizationType": "NONE",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "WsDisconnectWebsocketsIntegration"
              }
            ]
          ]
        }
      }
    },
    "WebsocketsDeploymentStage": {
      "Type": "AWS::ApiGatewayV2::Stage",
      "Properties": {
        "ApiId": {
          "Ref": "WebsocketsApi"
        },
        "StageName": "dev",
        "Description": "Serverless Websockets",
        "DeploymentId": {
          "Ref": "WebsocketsDeploymentafhIj7mH5e49v1Rcv9LPyFZnP4zCz9EVqIPCAuoNLE"
        }
      }
    },
    "WebsocketsDeploymentafhIj7mH5e49v1Rcv9LPyFZnP4zCz9EVqIPCAuoNLE": {
      "Type": "AWS::ApiGatewayV2::Deployment",
      "DependsOn": [
        "SconnectWebsocketsRoute",
        "SdisconnectWebsocketsRoute"
      ],
      "Properties": {
        "ApiId": {
          "Ref": "WebsocketsApi"
        },
        "Description": "Serverless Websockets"
      }
    },
    "CognitoUserPoolCognitoUserPool": {
      "Type": "AWS::Cognito::UserPool",
      "Properties": {
        "UserPoolName": "CognitoUserPool",
        "LambdaConfig": {
          "PreSignUp": {
            "Fn::GetAtt": [
              "PreSignUpLambdaFunction",
              "Arn"
            ]
          },
          "PostConfirmation": {
            "Fn::GetAtt": [
              "PostConfirmationLambdaFunction",
              "Arn"
            ]
          },
          "PreTokenGeneration": {
            "Fn::GetAtt": [
              "PreTokenGenerationLambdaFunction",
              "Arn"
            ]
          }
        }
      },
      "DependsOn": [
        "PreSignUpLambdaFunction",
        "PostConfirmationLambdaFunction",
        "PreTokenGenerationLambdaFunction"
      ]
    },
    "PreSignUpLambdaPermissionCognitoUserPoolCognitoUserPoolTriggerSourcePreSignUp": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "PreSignUpLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "cognito-idp.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "CognitoUserPoolCognitoUserPool",
            "Arn"
          ]
        }
      }
    },
    "PostConfirmationLambdaPermissionCognitoUserPoolCognitoUserPoolTriggerSourcePostConfirmation": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "PostConfirmationLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "cognito-idp.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "CognitoUserPoolCognitoUserPool",
            "Arn"
          ]
        }
      }
    },
    "PreTokenGenerationLambdaPermissionCognitoUserPoolCognitoUserPoolTriggerSourcePreTokenGeneration": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "PreTokenGenerationLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "cognito-idp.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "CognitoUserPoolCognitoUserPool",
            "Arn"
          ]
        }
      }
    },
    "ScraperProcessorEventSourceMappingSQSScraperQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 1,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "ScraperQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "ScraperProcessorLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true
      }
    },
    "MatchingCalculatorEventSourceMappingSQSMatchingQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 10,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "MatchingQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "MatchingCalculatorLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true
      }
    },
    "NotificationRetryProcessorEventSourceMappingSQSNotificationRetryQueue": {
      "Type": "AWS::Lambda::EventSourceMapping",
      "DependsOn": [
        "IamRoleLambdaExecution"
      ],
      "Properties": {
        "BatchSize": 5,
        "EventSourceArn": {
          "Fn::GetAtt": [
            "NotificationRetryQueue",
            "Arn"
          ]
        },
        "FunctionName": {
          "Fn::GetAtt": [
            "NotificationRetryProcessorLambdaFunction",
            "Arn"
          ]
        },
        "Enabled": true
      }
    },
    "CognitoUserPool": {
      "Type": "AWS::Cognito::UserPool",
      "Properties": {
        "UserPoolName": "affittochiaro-dev",
        "AutoVerifiedAttributes": [
          "email"
        ],
        "UsernameAttributes": [
          "email"
        ],
        "Policies": {
          "PasswordPolicy": {
            "MinimumLength": 8,
            "RequireUppercase": true,
            "RequireLowercase": true,
            "RequireNumbers": true,
            "RequireSymbols": false
          }
        },
        "Schema": [
          {
            "Name": "email",
            "Required": true,
            "Mutable": true
          },
          {
            "Name": "role",
            "AttributeDataType": "String",
            "Mutable": true
          },
          {
            "Name": "profile_id",
            "AttributeDataType": "String",
            "Mutable": true
          }
        ],
        "EmailConfiguration": {
          "EmailSendingAccount": "COGNITO_DEFAULT"
        }
      }
    },
    "CognitoUserPoolClient": {
      "Type": "AWS::Cognito::UserPoolClient",
      "Properties": {
        "ClientName": "affittochiaro-web-dev",
        "UserPoolId": {
          "Ref": "CognitoUserPool"
        },
        "GenerateSecret": false,
        "ExplicitAuthFlows": [
          "ALLOW_USER_PASSWORD_AUTH",
          "ALLOW_REFRESH_TOKEN_AUTH",
          "ALLOW_USER_SRP_AUTH"
        ],
        "PreventUserExistenceErrors": "ENABLED"
      }
    },
    "ApiGatewayAuthorizer": {
      "Type": "AWS::ApiGateway::Authorizer",
      "Properties": {
        "Name": "CognitoAuthorizer",
        "Type": "COGNITO_USER_POOLS",
        "IdentitySource": "method.request.header.Authorization",
        "RestApiId": {
          "Ref": "ApiGatewayRestApi"
        },
        "ProviderARNs": [
          {
            "Fn::GetAtt": [
              "CognitoUserPool",
              "Arn"
            ]
          }
        ]
      }
    },
    "UploadsBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketName": "affittochiaro-uploads-dev",
        "CorsConfiguration": {
          "CorsRules": [
            {
              "AllowedHeaders": [
                "*"
              ],
              "AllowedMethods": [
                "GET",
                "PUT",
                "POST",
                "DELETE"
              ],
              "AllowedOrigins": [
                "*"
              ],
              "MaxAge": 3000
            }
          ]
        }
      }
    },
    "WebSocketConnectionsTable": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "TableName": "affittochiaro-ws-connections-dev",
        "AttributeDefinitions": [
          {
            "AttributeName": "connectionId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "userId",
            "AttributeType": "S"
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "connectionId",
            "KeyType": "HASH"
          }
        ],
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "userId-index",
            "KeySchema": [
              {
                "AttributeName": "userId",
                "KeyType": "HASH"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          }
        ],
        "BillingMode": "PAY_PER_REQUEST"
      }
    },
    "ScraperQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "affittochiaro-scraper-dev",
        "VisibilityTimeout": 900,
        "MessageRetentionPeriod": 86400
      }
    },
    "MatchingQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "affittochiaro-matching-dev",
        "VisibilityTimeout": 300,
        "MessageRetentionPeriod": 86400
      }
    },
    "NotificationRetryQueue": {
      "Type": "AWS::SQS::Queue",
      "Properties": {
        "QueueName": "affittochiaro-notification-retry-dev",
        "VisibilityTimeout": 120,
        "MessageRetentionPeriod": 86400,
        "DelaySeconds": 300
      }
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ServerlessDeploymentBucketName"
      }
    },
    "PreSignUpLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "PreSignUpLambdaVersionMtB2a4hWNezRBnjnAB7k8hTltDJlkfVUXm1bLYVYw"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-PreSignUpLambdaFunctionQualifiedArn"
      }
    },
    "PostConfirmationLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "PostConfirmationLambdaVersionIc5oc1MpZj2mZigKmJ4D1unS0tlTzH19bDexyDpZUg"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-PostConfirmationLambdaFunctionQualifiedArn"
      }
    },
    "PreTokenGenerationLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "PreTokenGenerationLambdaVersionUbdb4xngGHskHmzqxCf5sIeVjSgZAbifNl3noKPzFRo"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-PreTokenGenerationLambdaFunctionQualifiedArn"
      }
    },
    "GetCurrentUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCurrentUserLambdaVersionORHCr2NyBljsue7S7J3A6iZIAmE8Abz1j7tvvJWVo"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetCurrentUserLambdaFunctionQualifiedArn"
      }
    },
    "ListTenantsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListTenantsLambdaVersionBlGNA3LtpG0fjQMJ7Vwdwjt4QlD9orghTUUNfknfKoo"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ListTenantsLambdaFunctionQualifiedArn"
      }
    },
    "GetTenantLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetTenantLambdaVersionFcBhqUPWmUQ5Yx2ilLoGfHls8uYfbBcGklEizydrY"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetTenantLambdaFunctionQualifiedArn"
      }
    },
    "GetTenantProfileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetTenantProfileLambdaVersionzvegZyI0c1nqgBxmKEAyCWqbvZ88htDdsbVWBTIc"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetTenantProfileLambdaFunctionQualifiedArn"
      }
    },
    "UpdateTenantProfileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateTenantProfileLambdaVersionJXXSg9Omw4Ddqv04mJpbY5PpwDYY36p3h27uRALc0PA"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-UpdateTenantProfileLambdaFunctionQualifiedArn"
      }
    },
    "UnlockTenantLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UnlockTenantLambdaVersionBz4qae5Yas3Abd8VT1UwTstFKcbnEotE9LHJAdAnLw"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-UnlockTenantLambdaFunctionQualifiedArn"
      }
    },
    "UploadDocumentLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UploadDocumentLambdaVersionwzYPXc4GlM36tawlcFmXYyXRfDoCtXSJEk5hDVvyw"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-UploadDocumentLambdaFunctionQualifiedArn"
      }
    },
    "GetAgencyProfileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetAgencyProfileLambdaVersionwEDMEN0HgZDucCXYCc4ry1RG92ymLZKCIBllPCfdk"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetAgencyProfileLambdaFunctionQualifiedArn"
      }
    },
    "UpdateAgencyProfileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateAgencyProfileLambdaVersionYY45yNDmBggJc5GQd2spn27kItJ4wFqHxSwmPXWbCF0"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-UpdateAgencyProfileLambdaFunctionQualifiedArn"
      }
    },
    "GetCreditsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCreditsLambdaVersionc10CNmD6EwQT1D2oKxcel6FDtxPRbZV5NzPQ88gIF7Q"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetCreditsLambdaFunctionQualifiedArn"
      }
    },
    "GetUnlockedTenantsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetUnlockedTenantsLambdaVersionrxfFykmVEJny8ZdxTnZEviSLGv0zy6BNGHK1UfZclOA"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetUnlockedTenantsLambdaFunctionQualifiedArn"
      }
    },
    "ListListingsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListListingsLambdaVersionhZk4f7TtpeNGC1215CLzF6OVy9URuU5VKQvYUqS1A"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ListListingsLambdaFunctionQualifiedArn"
      }
    },
    "GetListingLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetListingLambdaVersionZDt6h65m0dadNp7g4hSFy4GUEUlvM1IDdXiEt6lQ"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetListingLambdaFunctionQualifiedArn"
      }
    },
    "CreateListingLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateListingLambdaVersioncifGzjQIWtKiahVlmUXzlB9LedIDApIKBaWWaZ25Ic"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-CreateListingLambdaFunctionQualifiedArn"
      }
    },
    "UpdateListingLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateListingLambdaVersionEF22VewvHiyBd89ftG0QcOSaaZEBe2jLLv5sLDyVNE"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-UpdateListingLambdaFunctionQualifiedArn"
      }
    },
    "DeleteListingLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DeleteListingLambdaVersionL6SISwzvlfdRQxOZVPQ52inQHqg0Ky2EZl1CMa0OGoE"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-DeleteListingLambdaFunctionQualifiedArn"
      }
    },
    "ApplyToListingLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ApplyToListingLambdaVersionIynwHPfGF7KJiBRVCTwz5BwhKHuYGjVPllyRNvtHLSI"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ApplyToListingLambdaFunctionQualifiedArn"
      }
    },
    "ListApplicationsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListApplicationsLambdaVersionJOHkwgwsFiXxZRf7RrXsWfq9MgvpeZgoqXDec6UKXk"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ListApplicationsLambdaFunctionQualifiedArn"
      }
    },
    "UpdateApplicationLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateApplicationLambdaVersionQl1W6o8dhJl4UFyaSiTfKFxlG0sD4kxKOAApIXQe3k"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-UpdateApplicationLambdaFunctionQualifiedArn"
      }
    },
    "GetMatchingListingsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMatchingListingsLambdaVersionkTMspLSD5NPfa5zqrFVrV62lAUQZDVRcFpeQBDojTg"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetMatchingListingsLambdaFunctionQualifiedArn"
      }
    },
    "GetMatchingTenantsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMatchingTenantsLambdaVersionxRtys7lD88CltAWQLOLU0MYpIRCcfxPoiCdm5Ww8Gq8"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetMatchingTenantsLambdaFunctionQualifiedArn"
      }
    },
    "ListNotificationsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListNotificationsLambdaVersionL9jxXH7j2jPAu33BZu01PQuyuQ2wf7UpwwIk0ZvL4"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ListNotificationsLambdaFunctionQualifiedArn"
      }
    },
    "MarkNotificationsReadLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "MarkNotificationsReadLambdaVersionu00nu629WYobmNZ8ZmgNJXYmxhT8c8luGnM7jA8"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-MarkNotificationsReadLambdaFunctionQualifiedArn"
      }
    },
    "GetNotificationPreferencesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetNotificationPreferencesLambdaVersionOo4QOwb0HBv7e2DgU5kPMmXwedD9pI4jzZqiiPI1k"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-GetNotificationPreferencesLambdaFunctionQualifiedArn"
      }
    },
    "UpdateNotificationPreferencesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateNotificationPreferencesLambdaVersiontuqcYj0ht7QkhwiPqcQRf1V80SmmFqeVJu6U7c"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-UpdateNotificationPreferencesLambdaFunctionQualifiedArn"
      }
    },
    "CreateCheckoutLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateCheckoutLambdaVersionQtQvWWD9Xwa9cCKDhS310Luwfx5fWavw2NhlmreuY"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-CreateCheckoutLambdaFunctionQualifiedArn"
      }
    },
    "StripeWebhookLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "StripeWebhookLambdaVersion78QiAye0e8tpwq77lLv0dVwGTokla6SVGutVR2O70b4"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-StripeWebhookLambdaFunctionQualifiedArn"
      }
    },
    "CreatePortalSessionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreatePortalSessionLambdaVersionwU6qmy6h28LddCoxqMgM5M0944noGr9cE8inI4iXsQ"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-CreatePortalSessionLambdaFunctionQualifiedArn"
      }
    },
    "WsConnectLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WsConnectLambdaVersionTLsJJWzIuRI4deeNDUJZmVsiYjpBvhMgVRDywxIYIg0"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-WsConnectLambdaFunctionQualifiedArn"
      }
    },
    "WsDisconnectLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WsDisconnectLambdaVersionPQi9bCw5hwZD9pdmurYpC7csbLC7BEYhhLoI6lr1dQ"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-WsDisconnectLambdaFunctionQualifiedArn"
      }
    },
    "ScraperSchedulerLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ScraperSchedulerLambdaVersionU9AqN9ZhycnJ1VUt9Ao283VFC6QPooSRSn4SUguDLSk"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ScraperSchedulerLambdaFunctionQualifiedArn"
      }
    },
    "ScraperProcessorLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ScraperProcessorLambdaVersionqN9stOfqtaPGtZ6JisHdsPlzX9XtTDT31AxvHZVl0Q"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ScraperProcessorLambdaFunctionQualifiedArn"
      }
    },
    "MatchingCalculatorLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "MatchingCalculatorLambdaVersionH4pcaLoMO672pJwtGnRsNKu3y0pv41OJ9ydAsT7o"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-MatchingCalculatorLambdaFunctionQualifiedArn"
      }
    },
    "NotificationSenderLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "NotificationSenderLambdaVersioniOwywxWxAWlPt4gxpHNLDKeW3Rad7BpAKoIwBiUkKN4"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-NotificationSenderLambdaFunctionQualifiedArn"
      }
    },
    "NotificationDispatcherLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "NotificationDispatcherLambdaVersionxFsimg2Xu3FGvve0jDQZflTnhN5KyqLE6MlTXtPDhA"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-NotificationDispatcherLambdaFunctionQualifiedArn"
      }
    },
    "NotificationRetryProcessorLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "NotificationRetryProcessorLambdaVersionHD9lO4aCq5Z5ODhLbtvHJnTMCq673ZcJJIHsRz6WRg"
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-NotificationRetryProcessorLambdaFunctionQualifiedArn"
      }
    },
    "ServiceEndpoint": {
      "Description": "URL of the service endpoint",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "ApiGatewayRestApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/dev"
          ]
        ]
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ServiceEndpoint"
      }
    },
    "ServiceEndpointWebsocket": {
      "Description": "URL of the service endpoint",
      "Value": {
        "Fn::Join": [
          "",
          [
            "wss://",
            {
              "Ref": "WebsocketsApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/dev"
          ]
        ]
      },
      "Export": {
        "Name": "sls-affittochiaro-api-dev-ServiceEndpointWebsocket"
      }
    },
    "CognitoUserPoolId": {
      "Value": {
        "Ref": "CognitoUserPool"
      },
      "Export": {
        "Name": "affittochiaro-api-dev-UserPoolId"
      }
    },
    "CognitoUserPoolClientId": {
      "Value": {
        "Ref": "CognitoUserPoolClient"
      },
      "Export": {
        "Name": "affittochiaro-api-dev-UserPoolClientId"
      }
    },
    "ApiGatewayUrl": {
      "Value": {
        "Fn::Sub": "https://${ApiGatewayRestApi}.execute-api.eu-north-1.amazonaws.com/dev"
      },
      "Export": {
        "Name": "affittochiaro-api-dev-ApiUrl"
      }
    },
    "WebSocketUrl": {
      "Value": {
        "Fn::Sub": "wss://${WebsocketsApi}.execute-api.eu-north-1.amazonaws.com/dev"
      },
      "Export": {
        "Name": "affittochiaro-api-dev-WsUrl"
      }
    }
  }
}